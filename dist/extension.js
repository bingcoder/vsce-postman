(()=>{"use strict";var e={354:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handleHistoryRefresh=t.handleHistoryItemDelete=t.handleHistoryItemNewWindow=t.handleHistoryItemClick=t.handlePostmanNew=void 0;const s=i(549),n=i(622),r=i(790),o=(e,{id:t="vscPostman",title:i="新建请求"}={})=>{const o=s.window.activeTextEditor?s.window.activeTextEditor.viewColumn:s.ViewColumn.One,a=s.window.createWebviewPanel(t,i,o,{enableScripts:!0,localResourceRoots:[s.Uri.file(n.join(e.extensionPath,"media")),s.Uri.file(n.join(e.extensionPath,"build"))],retainContextWhenHidden:!0});a.iconPath={light:s.Uri.file(n.join(e.extensionPath,"media/panelIcon.light.svg")),dark:s.Uri.file(n.join(e.extensionPath,"media/panelIcon.dark.svg"))},a.webview.onDidReceiveMessage((e=>{switch(e.type){case"requestSave":const t=r.SideProvider.getHistory();return t.push(e.value),void r.SideProvider.updateHistory(t)}}));const d=a.webview.asWebviewUri(s.Uri.file(n.join(e.extensionPath,"build/bundle.js")));return a.webview.html=`<!DOCTYPE html>\n  <html>\n    <head>\n      <meta charset="UTF-8" />\n    </head>\n    <body>\n      <div id="root"></div>\n      <script>\n        const webviewVscode = acquireVsCodeApi();\n      <\/script>\n      <script src=${d}><\/script>\n    </body>\n  </html>`,a};t.handlePostmanNew=e=>()=>{o(e)},t.handleHistoryItemClick=e=>{let t;return i=>{t?t.reveal():t=o(e),t.title=i.name,console.log(i.name),t.webview.postMessage(i),t.onDidDispose((()=>{t=void 0}),null,e.subscriptions)}},t.handleHistoryItemNewWindow=e=>t=>{const i=o(e);i.title=t.name,i.webview.postMessage(t)},t.handleHistoryItemDelete=({createTime:e})=>{r.SideProvider.deleteHistoryItem(e)},t.handleHistoryRefresh=()=>{r.SideProvider.refresh()}},790:function(e,t,i){var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function o(e){try{d(s.next(e))}catch(e){r(e)}}function a(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}d((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SideProvider=t.SideItem=void 0;const n=i(549);class r extends n.TreeItem{constructor(e){const{method:t,name:i,createTime:s,url:n}=e;super({label:`${t[0].toUpperCase()}•${i}`}),this.id=`${s}`,this.tooltip=`${t} ${n}`,this.command={title:"查看",command:"vscPostmanHistory.click",arguments:[e]}}}t.SideItem=r;class o{constructor(){return this._onDidChangeTreeData=new n.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,o.instance||(o.instance=this)}getTreeItem(e){return new r(e)}getChildren(){return o.getHistory().map((e=>JSON.parse(e))).sort(((e,t)=>t.createTime-e.createTime))}static getHistory(){return n.workspace.getConfiguration().get(this.historyKey)}static updateHistory(e){return this.refresh((()=>n.workspace.getConfiguration().update(this.historyKey,e,!0)))}static deleteHistoryItem(e){const t=this.getHistory().filter((t=>!t.includes(`${e}`)));this.updateHistory(t)}static refresh(e){return s(this,void 0,void 0,(function*(){e&&(yield e()),this.instance._onDidChangeTreeData.fire()}))}}t.SideProvider=o,o.historyKey="vscPostman.history"},622:e=>{e.exports=require("path")},549:e=>{e.exports=require("vscode")}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,i),r.exports}var s={};(()=>{var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.activate=void 0;const t=i(549),n=i(790),r=i(354);e.activate=function(e){console.log("start"),e.subscriptions.push(t.window.registerTreeDataProvider("vsc-postman-side",new n.SideProvider)),e.subscriptions.push(t.commands.registerCommand("vscPostman.new",r.handlePostmanNew(e))),e.subscriptions.push(t.commands.registerCommand("vscPostmanHistory.click",r.handleHistoryItemClick(e))),e.subscriptions.push(t.commands.registerCommand("vscPostmanHistory.newWindow",r.handleHistoryItemNewWindow(e))),e.subscriptions.push(t.commands.registerCommand("vscPostmanHistory.delete",r.handleHistoryItemDelete)),e.subscriptions.push(t.commands.registerCommand("vscPostmanHistory.refresh",r.handleHistoryRefresh))}})(),module.exports=s})();